# Default values for k8s-prometheus-adapter..
affinity: {}

image:
  repository: kairosinc/custom-metrics-prometheus-adapter
  tag: v0.2.1
  pullPolicy: IfNotPresent

logLevel: 6

metricsRelistInterval: 30s

nodeSelector: {}

# Url to access prometheus
prometheus:
  url: http://prometheus-server.monitoring.svc
  port: 80

replicas: 1

rbac:
  # Specifies whether RBAC resources should be created
  create: true

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name:

resources:
  # requests:
  #   cpu: 100m
  #   memory: 128Mi
  # limits:
  #   cpu: 100m
  #   memory: 128Mi

rules:
  default: false
  custom:
  - seriesQuery: '{__name__=~"kairosnet_grpc_sum",pod!="",kubernetes_namespace!=""}'
    resources:
      overrides:
        kubernetes_namespace: {resource: "namespace"}
        pod: {resource: "pod"}
    name:
      matches: ".*"
      as: "kairosnet_grpc_requests"
    metricsQuery: 'sum(irate(<<.Series>>{<<.LabelMatchers>>}[2m])) by (<<.GroupBy>>)'
service:
  annotations: {}
  port: 443
  type: ClusterIP

tls:
  enable: false
  ca: |-
    # Public CA file that signed the APIService
  key: |-
    # Private key of the APIService
  certificate: |-
    # Public key of the APIService

tolerations: []
